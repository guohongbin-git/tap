### **修订记录 (Change Log)**

| 版本 (Version) | 日期 (Date) | 变更内容 (Change Description) | 作者 (Author) | 审批人 (Approved By) |
| :--- | :--- | :--- | :--- | :--- |
| 1.5 | 2025年8月15日 | v1.4版本已由郭宏斌评审通过。更新审批状态。 | Gemini | (待审批) |
| 1.4 | 2025年8月15日 | 根据澄清，移除对MCP(Max-p-regions)的错误引用，并正确地在LLM集成功能中定义了MCP(模型上下文协议)。 | Gemini | 郭宏斌 |
| 1.3 | 2025年8月15日 | 增加LLM作为目标用户；明确项目在学术上与MCP问题的关联。 | Gemini | 郭宏斌 |
| 1.2 | 2025年8月15日 | v1.1版本已由QWEN AI评审通过。更新审批状态。 | Gemini | 郭宏斌 |
| 1.1 | 2025年8月15日 | 根据QWEN AI的评审意见进行全面修订... | Gemini | QWEN AI |
| 1.0 | 2025年8月15日 | 初版创建... | Gemini | 郭宏斌 |

---
**版本**: 1.5
**状态**: 已批准 (Approved)

# **项目愿景与范围 (Vision & Scope)**

## 1. 项目愿景 (Vision)

TAP是**T**erritory **A**lignment **P**roblem（领土划分问题）的缩写，本项目命名为“**TAP工具箱**”，旨在为解决此类问题提供一个具备自我解释能力的、可实现自动化研究的智能化框架。本项目的目标不仅是解决具体的业务问题，更是要打造一个用于算法研究、对比和教育的、可扩展的平台。

核心愿景是，将复杂的领土划分算法和流程，通过一个高度解耦、模块化的系统进行封装，并集成一个多模态大语言模型（LLM）作为系统的“智能内核”。这个内核使得系统能够自我记录、自我解释其内部复杂的流程，从而极大地降低了开发人员和分析师理解和使用这些高级算法的门槛。

## 2. 项目范围 (Scope)

### 2.1. 核心功能

1.  **模块化算法核心**: 支持以“即插即用”的方式，集成和对比多种领土划分算法。项目初期计划支持`Metis`和`SKATER`等经典算法。该功能将通过定义一个统一的算法接口（例如，`TerritoryPartitioner`抽象基类）来实现，确保了算法的可扩展性。

2.  **分层解耦的架构**: 整体架构分为明确的层次，各层职责单一且通过标准化接口交互，具体分层及职责请参见`docs/01_architecture.md`。主要包括：
    *   **数据层**: 负责数据的输入、生成、清洗和预处理，为下游提供标准化的图数据结构。
    *   **算法层**: 封装具体的划分算法实现。
    *   **评估层**: 负责使用客观指标（如平衡性、紧凑性）对算法结果进行打分。
    *   **可视化层**: 负责生成交互式图表和用于日志的静态截图。
    *   **自动化调度中心**: 顶层“大脑”，负责驱动和记录整个实验流程。

3.  **强大的数据生成与处理能力**:
    *   内置一个可高度配置的“地理数据生成器”，能够通过多种空间点过程模型（如泊松过程、聚类过程）生成多样化的测试数据。此功能主要用于**算法的基准测试（Benchmarking）和验证**，确保能够有效评估算法在不同分布场景下的性能。
    *   支持从用户上传的真实数据中进行抽样，以生成具有真实统计特征的“半合成”数据。

4.  **自动化实验与视觉日志**:
    *   支持通过**YAML格式**的配置文件驱动，自动化地执行“数据-算法-评估”的完整实验流程。配置文件将允许用户控制数据源选择、算法及其参数、以及评估指标等。
    *   在实验的每个关键步骤，自动生成详细的“视觉日志”。该日志将作为后续LLM分析的基础。

5.  **LLM深度集成**:
    *   **模型上下文协议 (Model Context Protocol, MCP)**: 为实现LLM的有效集成，我们将定义和实现一套“模型上下文协议”。该协议是一套标准化的规则，用于规定系统如何自动收集、组织和格式化图文日志，以作为高质量、结构化的上下文，稳定地提供给内置的LLM进行分析和解释。
    *   内置的LLM能够理解MCP格式的上下文，并对用户的提问（如“为什么A算法比B算法更紧凑？”）生成富有洞见的、图文并茂的解释。
    *   在设计阶段，LLM能够对新的设计变更请求进行影响评估，辅助决策。
    *   **挑战与前提**: 需认识到，实现“富有洞见的解释”高度依赖于前述“视觉日志”的数据质量，并需要对LLM进行深入的**提示工程（Prompt Engineering）**研究，以设定合理的期望。

### 2.2. 目标用户与优先级

为指导项目初期的功能开发和资源投入，我们将目标用户划分为以下优先级：

*   **主要目标用户 (MVP阶段)**:
    *   **数据科学家与算法研究员**: 他们是本工具箱的核心用户，需要一个稳健的平台来测试、验证和对比算法。初期的核心功能将围绕他们的需求展开。

*   **次要目标用户 (后续阶段)**:
    *   **业务分析师**: 在核心算法框架稳定后，我们将重点发展更友好的用户界面和更通俗易懂的结果解释，服务于可能不具备深厚算法背景的分析师。
    *   **软件开发者**: 在项目成熟后，我们将提供清晰的API文档，方便开发者将本工具箱的核心功能集成到更大型的业务系统中。

*   **未来目标用户 (Visionary)**:
    *   **AI代理与其他LLM**: 本工具箱输出的结构化、图文并茂的日志，本身就可以作为一种高质量的数据集或功能API，服务于其他需要解决或理解领土划分问题的AI系统，实现AI之间的协同工作。
